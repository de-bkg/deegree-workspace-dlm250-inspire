<SQLFeatureStore configVersion="3.1.0" 
                 xmlns="http://www.deegree.org/datasource/feature/sql" 
                 xmlns:elf-ps="http://www.locationframework.eu/schemas/ProtectedSites/1.0" 
                 xmlns:ps="http://inspire.ec.europa.eu/schemas/ps/4.0" 
                 xmlns:gn="http://inspire.ec.europa.eu/schemas/gn/4.0" 
                 xmlns:base="http://inspire.ec.europa.eu/schemas/base/3.3" 
                 xmlns:gml="http://www.opengis.net/gml/3.2"
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
                 xmlns:xlink="http://www.w3.org/1999/xlink" 
                 xsi:schemaLocation="http://www.deegree.org/datasource/feature/sql http://schemas.deegree.org/datasource/feature/sql/3.1.0/sql.xsd">
                 
  <JDBCConnId>JDBC</JDBCConnId>
  <StorageCRS srid="4258" dim="2D">EPSG:4258</StorageCRS>
  <GMLSchema>d:\Projekte\GIS\deegree\deegree-elf\appschemas\elf\ProtectedSites.xsd</GMLSchema>
  
  
  <FeatureTypeMapping name="ps:ProtectedSite" table="ps.protectedsite">
    <FIDMapping prefix="DLM250_ProtectedSite_">
      <Column name="localid" type="string"/>
    </FIDMapping>
    <Complex path="gml:identifier">
      <Primitive path="text()" mapping="localid"/>
      <Primitive path="@codeSpace" mapping="'http://bkg.bund.de/dlm250'"/>
    </Complex>
    <Complex path="ps:geometry">
      <Geometry path="." mapping="geometry"/>
    </Complex>
    <Complex path="ps:inspireID">
      <Complex path="base:Identifier">
        <Primitive path="base:localId" mapping="localid"/>
        <Primitive path="base:namespace" mapping="'http://bkg.bund.de/dlm250'"/>
        <Complex path="base:versionId">
          <Primitive path="@nilReason" mapping="'other:unpopulated'"/>
          <Primitive path="@xsi:nil" mapping="'true'"/>
        </Complex>
      </Complex>
    </Complex>
    <Complex path="ps:legalFoundationDate">
      <Primitive path="text()" mapping="legalfoundationdate"/>
      <Primitive path="@nilReason" mapping="legalfoundationdate_nilreason"/>
      <Primitive path="@xsi:nil" mapping="legalfoundationdate_nil"/>
    </Complex>
    <Complex path="ps:siteDesignation">
      <Join table="ps.protectedsite_sitedesignation" fromColumns="localid" toColumns="parentfk"/>
      <Primitive path="@nilReason" mapping="nilreason"/>
      <Primitive path="@xsi:nil" mapping="nil"/>
      <Complex path="ps:DesignationType">
        <Complex path="ps:designationScheme">
          <Primitive path="@nilReason" mapping="designationscheme_nilreason"/>
          <Feature path=".">
            <Href mapping="designationscheme_href"/>
          </Feature>
        </Complex>
        <Complex path="ps:designation">
          <Primitive path="@nilReason" mapping="designation_nilreason"/>
          <Feature path=".">
            <Href mapping="designation_href"/>
          </Feature>
        </Complex>
        <Primitive path="ps:percentageUnderDesignation" mapping="percentageunderdesignation"/>
      </Complex>
    </Complex>
    <Complex path="ps:siteName">
      <Join table="ps.protectedsite_gn" fromColumns="localid" toColumns="parentfk"/>
      <Primitive path="@nilReason" mapping="nilreason"/>
      <Primitive path="@xsi:nil" mapping="nil"/>
      <Complex path="gn:GeographicalName">
       <Complex path="gn:language">
          <Primitive path="@xsi:nil" mapping="'false'"/>
          <Primitive path="text()" mapping="language"/>
        </Complex>
        <Complex path="gn:nativeness">
          <Primitive path="@xsi:nil" mapping="'false'"/>
          <Feature path=".">
            <Href mapping="nativeness_href"/>
          </Feature>
        </Complex>
        <Complex path="gn:nameStatus">
          <Primitive path="@xsi:nil" mapping="'false'"/>
          <Feature path=".">
            <Href mapping="namestatus_href"/>
          </Feature>
        </Complex>
        <Complex path="gn:sourceOfName">
          <Primitive path="@xsi:nil" mapping="'false'"/>
          <Primitive path="text()" mapping="sourceofname"/>
        </Complex>
        <Complex path="gn:pronunciation">
          <Primitive path="@nilReason" mapping="'other:unpopulated'"/>
          <Primitive path="@xsi:nil" mapping="'true'"/>
        </Complex>
        <Complex path="gn:spelling">
          <Join table="ps.protectedsite_gn_spelling" fromColumns="id" toColumns="parentfk"/>
          <Complex path="gn:SpellingOfName">
            <Primitive path="gn:text" mapping="text"/>
            <Complex path="gn:script">
              <Primitive path="text()" mapping="script"/>
              <Primitive path="@xsi:nil" mapping="'false'"/>
            </Complex>
          </Complex>
        </Complex>
      </Complex>
    </Complex>
    <Complex path="ps:siteProtectionClassification">
      <Join table="ps.protectedsite_classification" fromColumns="localid" toColumns="parentfk"/>
      <Primitive path="text()" mapping="value"/>
      <Primitive path="@nilReason" mapping="nilreason"/>
      <Primitive path="@xsi:nil" mapping="nil"/>
    </Complex>
  </FeatureTypeMapping>
  
</SQLFeatureStore>